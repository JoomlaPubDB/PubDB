<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Citation test</title>
</head>
<body>
<script>
    function submit() {
        const json = {};
        json["1"] = [];
        document.getElementById('ids1').innerText.split(";").forEach(function step(cur) {
            json["1"].push(parseInt(cur));
        });
        json["1"].pop();
        let tmp = document.getElementById('ids2').innerText.split(";");
        tmp.pop();
        let rtn = ["1","2",document.getElementById('ids3').innerText];
        rtn = rtn.concat(tmp);
        rtn = rtn.concat(["3","4"]);
        for (let i = 0; i < rtn.length; i++)
            rtn[i] = parseInt(rtn[i]);
        json["1"].splice(json["1"].indexOf(-1), 1, ...rtn);
        document.querySelector('#out').innerText = JSON.stringify(json);
    }
</script>

<h1> Type 1 </h1>
<p id="show1"></p>
<p id="ids1"></p>
<ul id="1">
    <li onclick="document.getElementById('ids1').innerText += '5;'; document.getElementById('show1').innerText += 'Year ';">
        Coffee
    </li>
    <li onclick="document.getElementById('ids1').innerText += '6;'; document.getElementById('show1').innerText += 'Tea ';">
        Tea
    </li>
    <li onclick="document.getElementById('ids1').innerText += '7;'; document.getElementById('show1').innerText += 'Milk ';">
        Milk
    </li>
    <li onclick="document.getElementById('author').style.display = 'block'; document.getElementById('show1').innerText += 'Authors '; document.getElementById('ids1').innerText += '-1;'">
        Author
    </li>
</ul>

<div id="author" style="display: none">
    <h1> Authors </h1>
    <p id="show2"></p>
    <p id="ids2"></p>
    <ul id="2">
        <li onclick="document.getElementById('ids2').innerText += '8;'; document.getElementById('show2').innerText += 'First ';">
            First
        </li>
        <li onclick="document.getElementById('ids2').innerText += '9;'; document.getElementById('show2').innerText += 'Last ';">
            Last
        </li>
        <li onclick="document.getElementById('ids2').innerText += '10;'; document.getElementById('show2').innerText += 'Initial ';">
            Initial
        </li>
    </ul>
    Delimiter: <p id="show3"></p>
    <p id="ids3"></p>
    <ul id="3">
        <li onclick="document.getElementById('ids3').innerText = '11'; document.getElementById('show3').innerText = '; ';">
            ;
        </li>
        <li onclick="document.getElementById('ids3').innerText = '12'; document.getElementById('show3').innerText = ', ';">
            ,
        </li>
        <li onclick="document.getElementById('ids3').innerText = '13'; document.getElementById('show3').innerText = '& ';">
            &
        </li>
    </ul>
</div>

<button onclick="submit()">Submit</button><br>
<label for="out">Output String</label><textarea id="out"></textarea>
</body>
</html>